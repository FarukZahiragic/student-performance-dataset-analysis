# -*- coding: utf-8 -*-
"""VIS23-Z1-TIM1.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Y4PJPnID2314idGNTHzJFMRZ_p1VI-gK

##Elektrotehnički fakultet Sarajevo

###Vjerovatnoća i statistika

# **STUDENT PERFORMANCE PREDICTION**

## Libraries and Datasets
"""

import io
import pandas
import matplotlib.pyplot as plot
import array as arr
import statistics
import seaborn
import numpy
from tabulate import tabulate

from google.colab import files
uploaded = files.upload()

dataframe_large = pandas.read_csv(io.BytesIO(uploaded['exams_large.csv']))

from google.colab import files
uploaded = files.upload()

dataframe_medium = pandas.read_csv(io.BytesIO(uploaded['exams_medium.csv']))

"""# Izlaganje

Tim je radio zajedno na svim zadacima.

## **PRVI DIO ISPITIVANJA**

### 1.1 Rezultati testova u ovisnosti o spolu učenika

Prvi dio ove statističke analize će se baviti odnosom rezultata testova i spola učenika. Kako navedene rezultate posmatramo jednodimenzionalno, odnosno odvojeno za učenike oba spola, isti će biti predstavljeni boxplot-ovima.

No, prvo je potrebno analizirati spolnu strukturu uzorka. Kao što možemo primijetiti na sljedećem histogramu, broj učenika muškog i ženskog spola u uzorku je približno jednak.
"""

gender = dataframe_large['gender']
hp = seaborn.histplot(x = gender)
hp.patches[0].set_facecolor('#5c74a4')
hp.patches[1].set_facecolor('#cb8b64')
plot.title('Odnos broja učenika muškog i ženskog spola')
plot.show()

"""**Rezultati testa iz matematike:**"""

math = dataframe_large['math score']
math_female = arr.array('i')
math_male = arr.array('i')

for i in range(len(gender)) :
  if gender[i] == "female" : math_female.append(math[i])
  else : math_male.append(math[i])

seaborn.boxplot(x = gender, y = math, palette = "deep")
plot.title('Rezultati testa iz matematike')
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(math_male)
mean_m = statistics.mean(math_male)
median_f = statistics.median(math_female)
mean_f = statistics.mean(math_female)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Učenici (male)', median_m, mean_m], ['Učenice (female)', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))

"""**Rezultati testa čitanja:**"""

read = dataframe_large['reading score']
read_female = arr.array('i')
read_male = arr.array('i')

for i in range(len(gender)) :
  if gender[i] == "female" : read_female.append(read[i])
  else : read_male.append(read[i])

seaborn.boxplot(x = gender, y = read, palette = "deep")
plot.title('Rezultati testa čitanja')
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(read_male)
mean_m = statistics.mean(read_male)
median_f = statistics.median(read_female)
mean_f = statistics.mean(read_female)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Učenici (male)', median_m, mean_m], ['Učenice (female)', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))

"""**Rezultati testa pisanja:**"""

write = dataframe_large['writing score']
write_female = arr.array('i')
write_male = arr.array('i')

for i in range(len(gender)) :
  if gender[i] == "female" : write_female.append(write[i])
  else : write_male.append(write[i])

seaborn.boxplot(x = gender, y = write, palette = "deep")
plot.title('Rezultati testa pisanja')
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(write_male)
mean_m = statistics.mean(write_male)
median_f = statistics.median(write_female)
mean_f = statistics.mean(write_female)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Učenici (male)', median_m, mean_m], ['Učenice (female)', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))

"""Iz navedenoga možemo zaključiti sljedeće:

- Na testu iz matematike su učenici bili uspješniji nego učenice, što možemo primjetiti iz oblika samih boxplot-ova. U slučaju učenika (male), čitava raspodjela generalno naginje većim vrijednostima. Medijan rezultata učenica (female) je pak nešto manji.
- Kada su u pitanju rezultati na testu čitanja, situacija je skoro pa obrnuta u odnosu na matematiku.
- Razlike u rezultatima između učenica i učenika su najviše primjetne na posljednjem grafiku za test pisanja, gdje je ujedno i najveća razlika između medijana ova dva grafika. Uočava se osjetna razlika između položaja female i male boxplot-a (viši minimum i medijan).

Dakle, iako su učenici bili uspješniji u matematici, to nije slučaj za testove čitanja i pisanja.

Ono što je zajedničko za sva tri prikaza rezultata pomoću boxplot-ova je da su maksimumi približno jednaki (cca 100, što je svakako posljedica činjenice da su podaci rezultati školskih testova sa maksimalno 100 mogućih bodova), kao i veći broj outlier-a ispod minimuma na prikazima uspjeha učenika (male), što svakako direktno utječe na vrijednosti medijana i srednje vrijednosti. No ipak, u svakom od tri slučaja su vrijednosti medijana i srednje vrijednosti skoro pa jednake, dakle nema prevelikih odstupanja.

Na osnovu ovoga možemo zaključiti da za instance našeg uzorka postoji veza između spola i rezultata testova, osvrćući se i na činjenicu o dosta većoj srodnosti disciplina čitanja i pisanja, nego što je to slučaj s matematikom.

### 1.2 Matematika u odnosu na čitanje i pisanje

U ovom dijelu izlaganja želimo ispitati da li postoji korelacija između varijabli koje predstavljaju rezultate testa iz matematike, čitanja i pisanja, i to na način:


*   rezultati testa iz matematike u odnosu na rezultate testa iz čitanja
*   rezultati testa iz matematike u odnosu na rezultate testa iz pisanja

Ipak, prije nego što uspostavimo relaciju između više varijabli, razmotrit ćemo distribuciju pojedinačnih varijabli i to koristeći *histplot*-ove na osnovu kojih možemo izvesti (očekivan) zaključak, a koji se odnosi na normalnu distribuciju sve tri posmatrane varijable, poznatu kao Gaussova raspodjela - što "dokazujemo" prikazom srednje vrijednosti, mode i mediane.

**Distribucija rezultata iz matematike, čitanja i pisanja**
"""

figure, axes = plot.subplots(1, 3, figsize = (16, 5))

math = dataframe_large['math score']
seaborn.histplot(math, color = '#283350', ax = axes[0])

reading = dataframe_large['reading score']
seaborn.histplot(reading, color = '#f93800', ax = axes[1])

writing = dataframe_large['writing score']
seaborn.histplot(writing, color = '#ffb500', ax = axes[2])

plot.show()
figure.tight_layout()

"""**Prikaz srednje vrijednosti, medijane i mode za pojedinačne vještine**"""

mean_math = statistics.mean(math)
median_math = statistics.median(math)
mode_math = statistics.mode(math)

mean_reading = statistics.mean(reading)
median_reading = statistics.median(reading)
mode_reading = statistics.mode(reading)

mean_writing = statistics.mean(writing)
median_writing = statistics.median(writing)
mode_writing = statistics.mode(writing)

table = [['Vještina', 'Srednja vrijednost', 'Medijana', 'Moda'],
         ['Matematika', mean_math, median_math, mode_math],
         ['Čitanje', mean_reading, median_reading, mode_reading],
         ['Pisanje', mean_writing, median_writing, mode_writing]]

print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))

"""Kratak osvrt - posmatranjem vrijednosti rezultata testova (x-osa) možemo primijetiti sličnosti u distribuciji pojedinih varijabli, dok se posebno ističe podudarnost u slučaju varijabli rezultata iz čitanja i pisanja.

Vođeni intuitivno, iskustvom ili dosadašnjim istraživanjima, jasno nam je da korelacija između posmatranih varijabli postoji, te da su one međusobno direktno proporcionalne (riječ je, dakle, o pozitivnoj korelaciji), što ćemo u nastavku pokazati koristeći *scatterplot*.

**Matematika u odnosu na čitanje**
"""

plot.subplots(1, 1, figsize = (5, 4))

reading = dataframe_large['reading score']
math = dataframe_large['math score']

plot.scatter(reading, math, color = '#f93800')
plot.xlabel('reading score')
plot.ylabel('math score')
plot.show()

print("Koeficijent korelacije iz matematike i čitanja: ", numpy.corrcoef(reading, math)[0, 1])

"""**Matematika u odnosu na pisanje**"""

plot.subplots(1, 1, figsize = (5, 4))

writing = dataframe_large['writing score']
math = dataframe_large['math score']

plot.scatter(writing, math, color = '#ffb500')
plot.xlabel('writing score')
plot.ylabel('math score')
plot.show()

print("Koeficijent korelacije iz matematike i pisanja: ", numpy.corrcoef(writing, math)[0, 1])

"""Iz predstavljenog je sasvim jasno da su zavisnosti linearne, te da su sve tri varijable usko povezane. Međutim, kako bismo još više istakli poentu, u nastavku će biti prikazan graf čiji je stepen korelacije još veći, što možemo konstatovati na osnovu tačaka koje su još bliže pratećoj pravoj.

**Pisanje u odnosu na čitanje**
"""

plot.subplots(1, 1, figsize = (5, 4))

reading = dataframe_large['reading score']
writing = dataframe_large['writing score']

plot.scatter(reading, writing, color = '#283350')
plot.xlabel('reading score')
plot.ylabel('writing score')
plot.show()

print("Koeficijent korelacije iz čitanja i pisanja: ", numpy.corrcoef(reading, writing)[0, 1])

"""Koeficijent korelacije u posljednjem prikazu je izrazito visok!

Možemo reći da su rezultati u skladu s očekivanjima!

### Zaključak prvog dijela

Posmatrajući tri navedene vještine u odnosu na mušku i žensku populaciju, u prvom dijelu istraživanja smo uvidjeli kako su djevojke bolje u dvije od njih, dok je drugi dio istraživanja pokazao kako su uspjesi između predmeta povezani.

S tim u vezi, rezultati nas navode da se zapitamo da li je sveukupni uspjeh ženske populacije bolji nego kod muške, stoga ćemo na ovom mjestu prvi dio istraživanja zaokružiti upravo ispitivanjem ukupnog uspjeha oba spola.
"""

score_female = arr.array('i')
score_male = arr.array('i')

for i in range(len(math_female)) :
  score_female.append(math_female[i] + read_female[i] + write_female[i])

for i in range(len(math_male)) :
  score_male.append(math_male[i] + read_male[i] + write_male[i])

f, axes = plot.subplots(1, 3, figsize = (16, 5))

ax1 = seaborn.histplot(x = score_male, color = '#154c79', ax = axes[0], kde = True)
ax1.set_xlim(left=0, right=310)
ax1.set_ylim(bottom=0, top=85)
ax1.set_xlabel('Score')
ax1.title.set_text("Učenici (male)")
ax2 = seaborn.histplot(x = score_female, color = '#cb8b64', ax = axes[1], kde = True)
ax2.set_xlim(left=0, right=310)
ax2.set_ylim(bottom=0, top=85)
ax2.set_xlabel('Score')
ax2.title.set_text("Učenice (female)")
kp = seaborn.kdeplot([score_male, score_female], palette = "deep", ax = axes[2])
plot.legend(
    labels = ['female', 'male']
)
kp.set(ylabel = None)
kp.set_xlabel('Score')
plot.show()

"""Možemo očitati kako graf raspodjele bodova ženske populacije više "naginje" ka maksimumu, dok je kod muške populacije veoma izražen središnji dio krive kao srednja vrijednost u raspodjeli bodova. Također, vidimo i kako je manji broj djevojaka ostvario minimalan broj bodova, a navedene razlike najbolje opažamo na krajnje desnom grafu.

Ovim smo potvrdili našu pretpostavku, te sve rezultate prvog dijela ispitivanja objedinili u jednu cjelinu.

## **DRUGI DIO ISPITIVANJA**

### 2.1 Veza između doplatka na užinu i rezultata na testovima

U ovom dijelu izlaganja cilj je pronaći vezu između socijalnog statusa učenika i njegovih rezultata u školi. Naša pretpostavka je da učenici iz siromašnijih porodica imaju lošije rezultate u školi. U ovom posmatranju će nam pomoći varijable razmatrane u našem uzorku. Naša pretpostavka je da "lunch" varijabla može biti snažan indikator socijalnog stanja učenika, te da pomoću nje možemo, nakon što uradimo adekvatnu obradu uzorka, izvesti zaključak o našoj hipotezi.

S obzirom da "lunch" predstavlja diskretnu (kategoričnu) varijablu  vizuelizaciju ćemo realizovati preko box-plotova.

Posmatranja ćemo izvesti kroz tri vizualizacije putem box-plotova:


1.   Rezultati iz matematike učenika u odnosu na doplatak na užinu.
2.   Rezultati iz čitanja učenika u odnosu na doplatak na užinu.
3.   Rezultati iz pisanja učenika u odnosu na doplatak na užinu.

Također ćemo izvršiti i analize vjerovatnoće pojedinih događaja unutar dataset-a. Takav je uslovna vjerovatnoća da će učenik završiti pripremni kurs za test u zavisnosti od toga da li prima doplatak na užinu ili ne.

**Rezultati iz matematike učenika u odnosu na doplatak na užinu ("lunch").**
"""

# Veza izmedju doplatka na uzinu i rezultata iz matematike ucenika
lunch = dataframe_medium['lunch']
math = dataframe_large['math score']

math_standard = arr.array('i')
math_reduced = arr.array('i')

for i in range(len(lunch)) :
  if lunch[i] == "standard" : math_standard.append(math[i])
  else : math_reduced.append(math[i])

seaborn.boxplot(x = lunch, y = math, palette = "deep")
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(math_reduced)
mean_m = statistics.mean(math_reduced)
median_f = statistics.median(math_standard)
mean_f = statistics.mean(math_standard)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Free/reduced', median_m, mean_m], ['Standard', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))
plot.show()

"""**Rezultati iz čitanja učenika u odnosu na doplatak na užinu ("lunch").**"""

# Veza izmedju doplatka na uzinu i rezultata iz citanja ucenika
lunch = dataframe_medium['lunch']
reading = dataframe_large['reading score']

reading_standard = arr.array('i')
reading_reduced = arr.array('i')

for i in range(len(lunch)) :
  if lunch[i] == "standard" : reading_standard.append(reading[i])
  else : reading_reduced.append(reading[i])

seaborn.boxplot(x = lunch, y = reading, palette = "deep")
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(reading_reduced)
mean_m = statistics.mean(reading_reduced)
median_f = statistics.median(reading_standard)
mean_f = statistics.mean(reading_standard)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Free/reduced', median_m, mean_m], ['Standard', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))
plot.show()

"""**Rezultati iz čitanja učenika u odnosu na doplatak na užinu ("lunch").**"""

# Veza izmedju doplatka na uzinu i rezultata iz pisanja ucenika
lunch = dataframe_medium['lunch']
writing = dataframe_large['writing score']


writing_standard = arr.array('i')
writing_reduced = arr.array('i')

for i in range(len(lunch)) :
  if lunch[i] == "standard" : writing_standard.append(writing[i])
  else : writing_reduced.append(writing[i])

seaborn.boxplot(x = lunch, y = writing, palette = "deep")
ticks = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
plot.yticks(ticks)
plot.show()

median_m = statistics.median(writing_reduced)
mean_m = statistics.mean(writing_reduced)
median_f = statistics.median(writing_standard)
mean_f = statistics.mean(writing_standard)

table = [[' ', 'Medijan', 'Srednja vrijednost'], ['Free/reduced', median_m, mean_m], ['Standard', median_f, mean_f]]
print(tabulate(table, headers = 'firstrow', tablefmt = 'grid'))
plot.show()

"""**Uslovna vjerovatnoća**

Vjerovatnoća da će učenik završiti pripremni kurs ako ne prima dodatak na užinu.
"""

import numpy as np
brojnik = dataframe_large[(dataframe_large['lunch']=='free/reduced' ) & (dataframe_large["test preparation course"] == "completed")].shape[0]
nazivnik = dataframe_large[dataframe_large["lunch"] == "free/reduced"].shape[0]
vjerovatnoca = brojnik / nazivnik
print(vjerovatnoca)

"""Vjerovatnoća da će učenik završiti pripremni kurs ako prima dodatak na užinu."""

import numpy as np
brojnik = dataframe_large[(dataframe_large['lunch']=='standard' ) & (dataframe_large["test preparation course"] == "completed")].shape[0]
nazivnik = dataframe_large[dataframe_large["lunch"] == "standard"].shape[0]
vjerovatnoca = brojnik / nazivnik
print(vjerovatnoca)

"""Iz gore izvršenih posmatranja možemo zaključiti da postoji veza između doplatka na užinu i rezultata učenika. Naime, učenici koji ne dobijaju doplatak na užinu imaju bolje rezultate iz svih testova obuhvaćenih našim uzorkom. Najveća razlika je primjetna na rezultatima iz matematike, dok je nešto manja razlika u rezultatima iz čitanja i pisanja. Zanimljiv zaključak se može izvesti iz box-plotova, a vezan je za varijabilnost u pojedinim kategorijama. Izgledno je da kategorija koja standardno plaća užinu ima više ekstremnih vrijednosti od one koja prima doplatak na užinu.

Kao što vidimo veća je vjerovatnoća da studenti koji primaju doplatak na užinu završe pripremni kurs za test. Ovo saznanje može učiniti efikasnost pripremnog kursa upitnim jer su učenici koji ne primaju doplatak na užinu imali, u prosjeku, bolje rezultate na testovima.

### 2.2 Veza između obrazovanja roditelja, grupne pripadnosti i uspjeha studenata

U nastavku ovog izlaganja ćemo razmotriti postoji li povezanost između obrazovanja roditelja kao i grupne pripadnosti, što je usko povezano sa samim socio-ekonomskim statusom studenata, sa uspjehom studenata. Pa ćemo kao prvo pogledati distribuciju uspjeha studenata po naznačenim kategorijama.
"""

fig, ax = plot.subplots(1,4,sharex=True,figsize=(30,5))

seaborn.histplot(x=dataframe_large['writing score'],data=dataframe_large, hue='race/ethnicity',ax=ax[0],kde=True)
seaborn.histplot(x=dataframe_large['writing score'], data=dataframe_large, hue = 'parental level of education', ax=ax[1],kde=True)

seaborn.histplot(x=dataframe_large['math score'],data=dataframe_large, hue='race/ethnicity',ax=ax[2],kde=True)
seaborn.histplot(x=dataframe_large['math score'], data=dataframe_large, hue = 'parental level of education', ax=ax[3],kde=True)

fig.suptitle('Distribucija uspjeha iz pisanja (lijevo) i matematike (desno) po određenim kategorijama')
plot.show()

"""Iz gore priloženih grafova vidimo da postoji određena razlika u raspodjeli među
kategorijama, tako da vrijedi detaljnije razmatranje. U nastavku ćemo posmatrati
samo uspjeh iz matematike, jer je uspjeh iz čitanja i pisanja usko povezan sa uspjehom iz matematike, kao što smo iz prvog dijela izlaganja mogli uočiti.
"""

fig, ax = plot.subplots(1,2, figsize=(20, 5), sharey=True)

degrees = ["some high school","high school","some college","associate's degree","bachelor's degree","master's degree"]

mean_parent_edu = dataframe_large.groupby('parental level of education')['math score'].mean().reset_index().sort_values("math score")
median_parent_edu = dataframe_large.groupby('parental level of education')['math score'].mean().reset_index().sort_values("math score")

seaborn.barplot(data=mean_parent_edu, x='parental level of education', y='math score', ax=ax[0]).set_title("Mean of math score by parental level of education")
ax[0].tick_params(axis='x', rotation=20)

seaborn.boxplot(data=dataframe_large, x=dataframe_large["parental level of education"], y=dataframe_large["math score"], ax=ax[1], order=degrees).set_title("Boxplot of math score by parental level of education")
ax[1].tick_params(axis='x', rotation=20)

plot.show()

"""Ovdje vidimo da su studenti čiji roditelji imaju više obrazovanje ostvarili općenito bolje uspjehe. Razlika je pogotovo vidljiva kod roditelja sa završenim bachelorom i masterom u odnosu na ostale. Što je u skladu sa očekivanjima, jer veće zvanje povlači i bolje prihode, tako da studenti čiji roditelji imaju više zvanje imaju i bolje uslove za obrazovanje.

"""

fig, ax = plot.subplots(1,2, figsize=(20, 5), sharey=True)

mean_groups = dataframe_large.groupby('race/ethnicity')['math score'].mean().reset_index().sort_values("math score")

seaborn.barplot(data=mean_groups, x="race/ethnicity", y="math score", ax=ax[0])
seaborn.boxplot(data=dataframe_large, x=dataframe_large["race/ethnicity"], y=dataframe_large["math score"], ax=ax[1], order=["group A", "group B", "group D", "group C", "group E"])

plot.show()

"""Što se tiče odnosa grupne pripadnosti sa uspjehom studenata, vidimo da ne postoje velike razlike među grupama osim grupe E, koja se ističe po tome što su najslabiji rezultati iz ove grupe znatno bolji od ostalih grupa, samim tim je i medijan veći. Kako smo prethodno primjetili zavisnost obrazovanja roditelja sa rezultatima studenata, provjerit ćemo i odnose obrazovanja roditelja po grupama.

"""

#Vjerovatno postoji neki laksi nacin, nekom metodom nad nekom klasom iz neke biblioteke al i ovo radi
data = {"race":[], }
for degree in degrees:
      data[degree] = []

for group in dataframe_large["race/ethnicity"].unique():
        broj_grupa = len(dataframe_large.loc[dataframe_large["race/ethnicity"] == group])
        print(f"{group} ({broj_grupa}):")
        data["race"].append(group)

        for degree in degrees:
                broj_zavrseno = len(dataframe_large.loc[(dataframe_large["parental level of education"] == degree) & (dataframe_large["race/ethnicity"] == group)])
                udio = round(broj_zavrseno / broj_grupa * 100)
                print((f"Grupa '{group}' ima {broj_zavrseno} ucenika ciji roditelji imaju {degree}, udio: ".ljust(100) + "{:>10}").format(f"{udio}%"))

                data[degree].append(udio)

dataframe = pandas.DataFrame(data).sort_values("race")
dataframe.plot.bar(figsize = (30, 7), x="race", y=["some high school","high school","some college","associate's degree","bachelor's degree","master's degree"],
                   title="Percentages of parent level education by groups", ylabel="Percentage", rot=0)

plot.show()

"""Zaista vidimo da grupa E ima najveći udio studenata čiji roditelji imaju bachelor ili master. Tako da bi se bolji uspjeh grupe E mogao objasniti generalno boljim ekonomskim stanjem porodica grupe E. Tako da ćemo još razmotriti uspjeh studenata po jednoj varijabli obrazovanja roditelja.

"""

fig, ax = plot.subplots(1, 2, figsize=(20, 5), sharey=True)


bachelor = dataframe_large.loc[(dataframe_large["parental level of education"] == "high school")]
seaborn.boxplot(data=bachelor, x=bachelor["race/ethnicity"], y=bachelor["math score"], order=["group A", "group B", "group D", "group C", "group E"], ax=ax[0]).set_title("High school parental level education")

high_school = dataframe_large.loc[(dataframe_large["parental level of education"] == "bachelor's degree")]
seaborn.boxplot(data=high_school, x=high_school["race/ethnicity"], y=high_school["math score"], order=["group A", "group B", "group D", "group C", "group E"], ax=ax[1]).set_title("Bachelor's degree parental level education")

plot.show()

"""Ipak nakon što smo fiksirali varijablu *parental level education* (*high school, bachelor*), grafovi izgledaju slično kao i prethodni, tako da možemo zaključiti da postoji određena zavisnost uspjeha pojedinih grupa studenata, koju, na osnovu ovih podataka, ne možemo detaljnije odrediti.

### Zaključak drugog dijela

Kao što vidimo iz analize i korištenja statističke inferencije, razmatrane kategorije "doplatak na užinu" i "nivo obrazovanja roditelja" imaju uticaj na rezultat školaraca.

Za kraj, zanimljivo bi bilo pogledati vezu između ove dvije kategorije. Postavlja se pitanje da li će učenici čiji roditelji imaju, u prosjeku, veći stepen obrazovanja primati doplatak na užinu? Tu hipotezu ćemo testirati pomoću uslovne vjerovatnoće koja ispituje koja je vjerovatnoća da učenik čiji roditelji imaju nivo obrazovanja "master" prima doplatak na užinu. U baznim uslovima vjerovatnoća bi bila 0.5, ali vođeni prijašnjim saznanjima o ovim kateogorijama, kao i intuicijom, naša je pretpostavka da će ova vjerovatnoća biti znatno manja, što ćemo vidjeti u nastavku.
"""

import numpy as np
brojnik = dataframe_large[(dataframe_large['lunch']=='free/reduced' ) & (dataframe_large["parental level of education"] == "master's degree")].shape[0]
nazivnik = dataframe_large[dataframe_large["parental level of education"] == "master's degree"].shape[0]
vjerovatnoca = brojnik / nazivnik
print(vjerovatnoca)

"""Kao što vidimo, vjerovatnoća je znatno manja. čime smo potvrdili našu pretpostavku.

# Zaključak

Sumirajući čitavu analizu ovog dataset-a, vidimo da se prvi i drugi dio respektivno obaziru na korelacije rezultata testova iz pojedinačnih oblasti i konačnu vezu ukupnih rezultata sa spolom učenika, odnosno na povezanost roditeljskog obrazovanja, grupne pripadnosti i primanja doplatka sa uspjehom učenika.

No, postavlja se pitanje da li se ova dva segmenta zaista mogu posmatrati odvojeno. Stoga ćemo razmotriti raspodjelu nivoa roditeljskog obrazovanja po spolovima. Kao što se da primjetiti iz dolje priloženog grafika, ova raspodjela je približno jednaka za oba spola. Dakle, izvodi se zaključak da se utjecaj ovih varijabli na glavnu - rezultat na testovima, može posmatrati neovisno jedan o drugom, kao što je to slučaj u ovoj analizi.
"""

his = seaborn.histplot(data = dataframe_large, y = "parental level of education", multiple="dodge", shrink=.8, hue = "gender", palette = "deep")
plot.show()